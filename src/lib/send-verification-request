"server-only";

export async function sendVerificationRequest({ identifier: email }) {
  // Call the cloud Email provider API for sending emails
  const response = await fetch(process.env.MAGIC_LINK_URL!, {
    // The body format will vary depending on provider, please see their documentation
    body: JSON.stringify({
      email: email,
    }),
    headers: {
      "Content-Type": "application/json",
    },
    method: "POST",
  });
  console.log(response);
  if (!response.ok) {
    const { errors } = await response.json();
    throw new Error(JSON.stringify(errors));
  }
}
